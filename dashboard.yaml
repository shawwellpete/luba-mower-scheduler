title: Labby2
path: labby2
visible:
  - user: 8ade8783a1c34800b24fef4ae3c01c09 #kitchen ipad
  - user: c462207ae4a04e4b91a55f631b94a086 #Peter
  # - user: 5e0c53d915af416f99288ff3a1711586 #josh
icon: mdi:robot-mower
panel: false
cards:

  - type: horizontal-stack #do not mow and night block
    cards:
      - type: custom:mushroom-template-card
        primary: |-
          {% if is_state('input_boolean.do_not_mow', 'on') %}
            Do not mow ON
          {% else %}
            Ready to mow
          {% endif %}
        secondary: |-
          {% if is_state('input_boolean.do_not_mow', 'on') %}
          {{ states('input_text.reason_no_mow') }}
            
          {% else %}
            auto or clickable
          {% endif %}        
        icon: |-
          {% if is_state('input_boolean.do_not_mow', 'on') %}
            mdi:close
          {% else %}
            mdi:robot-mower
          {% endif %}
        entity: input_boolean.do_not_mow
        icon_color: |-
          {% if is_state('input_boolean.do_not_mow', 'on') %}
            red
          {% else %}
            green
          {% endif %}
        layout: vertical
        fill_container: false

      - type: custom:mushroom-template-card
        primary: |-
          {% if is_state('input_boolean.block_night_mowing', 'on') %}
            Night mowing blocked
          {% else %}
            Night mowing allowed
          {% endif %}
        icon: |-
          {% if is_state('input_boolean.block_night_mowing', 'on') %}
            mdi:weather-night
          {% else %}
            mdi:weather-sunset
          {% endif %}
        entity: input_boolean.block_night_mowing
        icon_color: |-
          {% if is_state('input_boolean.block_night_mowing', 'on') %}
            orange
          {% else %}
            grey
          {% endif %}
        tap_action:
          action: toggle
        layout: vertical
        fill_container: false

  - type: custom:lawn-mower-card #mower card - the buttons at the bottom all have the same icons
    entity: lawn_mower.labby
    battery: sensor.labby_battery
    show_toolbar: true
    show_shortcuts: true
    show_status: true
    # map: device_tracker.labby_luba_vfblns5n
    actions:
      start:
        service: lawn_mower.start_mowing
        service_data:
          entity_id: lawn_mower.labby
      stop:
        service: button.press
        service_data:         
          entity_id: button.labby_cancel_current_task
      image: /local/pictures/luba.png
        # service: lawn_mower.pause
        # service_data:
        #   entity_id: lawn_mower.labby
      pause:
        service: lawn_mower.pause
        service_data:
          entity_id: lawn_mower.labby
      resume:
        service: lawn_mower.start_mowing
        service_data:
          entity_id: lawn_mower.labby
      return_to_base:
        service: lawn_mower.dock
        service_data:
          entity_id: lawn_mower.labby   
    stats:
      default:
        - entity_id: sensor.labby_l1_satellites_co_viewing
          subtitle: L1 co viewing
        - entity_id: sensor.labby_l2_satellites_co_viewing
          subtitle: L2 co viewing
      mowing:
        - entity_id: sensor.labby_l1_satellites_co_viewing
          subtitle: L1 co viewing
        - entity_id: sensor.labby_l2_satellites_co_viewing
          subtitle: L2 co viewing
        - entity_id: sensor.labby_progress
          subtitle: progress
          unit: '%'
        - entity_id: sensor.labby_elapsed_time
          unit: minutes
          subtitle: Mowing time
        - entity_id: sensor.labby_blade_height

          unit: 'mm'
          subtitle: blade height
        

    shortcuts:
      - name: Mow back lawn 
        service: script.mow_back_lawn
        icon: mdi:texture-box
      - name: Mow bottom grass
        service: script.mow_bottom_grass
        icon: mdi:grass
      - name: Mow golf lawn 
        service: script.mow_golf_lawn
        icon: mdi:golf   
      - name: Mow path to top
        service: script.mow_path_to_top
        icon: mdi:road-variant
      - name: Mow top lawn 
        service: script.mow_top_lawn
        icon: mdi:weather-sunny


  # - type: custom:mushroom-entity-card
  #   entity: lawn_mower.labby
  #   name: Labby Status
  #   icon_color: green
  - type: custom:mushroom-template-card #general info on template
    primary: >
      {% if states('lawn_mower.labby') == 'mowing' %}
        Mowing {{ states('input_text.last_lawn_mowed') }}
      {% else %}
        {{ states('lawn_mower.labby') | title }} - last lawn {{ states('input_text.last_lawn_mowed') }}
      {% endif %}
    secondary: >
      {% if states('lawn_mower.labby') == 'mowing' %}
        {{ states('sensor.labby_elapsed_time') }} mins done {{ states('sensor.labby_time_left') }} mins left
      {% else %}
        Status updated: {{ states['lawn_mower.labby'].last_changed | relative_time }} ago
      {% endif %}
    icon: mdi:robot-mower
    icon_color: >
      {% set state = states('lawn_mower.labby') %}
      {% if state in ['mowing', 'moving'] %}
        green
      {% elif state == 'returning to dock' %}
        red
      {% else %}
        blue
      {% endif %}
    entity: lawn_mower.labby
  - type: custom:mushroom-chips-card #chips
    chips:
      - type: entity
        entity: switch.labby_blades_on_off
        name: Blades
      - type: action
        icon: mdi:cancel
        name: Cancel Task
        tap_action:
          action: call-service
          service: button.press
          data:
            entity_id: button.labby_cancel_current_task
      - type: action
        icon: mdi:logout
        name: Undock
        tap_action:
          action: call-service
          service: button.press
          data:
            entity_id: button.labby_undock

      # - type: action
      #   icon: mdi:map-marker-remove
      #   name: clear maps
      #   tap_action:
      #     action: call-service
      #     service: button.press
      #     data:
      #       entity_id: button.labby_clear_maps_and_area_names
  - type: grid #nudges
    columns: 2
    square: false
    cards:
      - type: custom:mushroom-template-card
        primary: Nudge Left
        icon: mdi:arrow-left-bold
        icon_color: blue
        tap_action:
          action: call-service
          service: button.press
          data:
            entity_id: button.labby_emergency_nudge_left

      - type: custom:mushroom-template-card
        primary: Nudge Right
        icon: mdi:arrow-right-bold
        icon_color: blue
        tap_action:
          action: call-service
          service: button.press
          data:
            entity_id: button.labby_emergency_nudge_right

      - type: custom:mushroom-template-card
        primary: Nudge Forward
        icon: mdi:arrow-up-bold
        icon_color: blue
        tap_action:
          action: call-service
          service: button.press
          data:
            entity_id: button.labby_emergency_nudge_forward

      - type: custom:mushroom-template-card
        primary: Nudge Back
        icon: mdi:arrow-down-bold
        icon_color: blue
        tap_action:
          action: call-service
          service: button.press
          data:
            entity_id: button.labby_emergency_nudge_back


  - type: custom:map-card
    focus_entity: device_tracker.labby_luba_vp8gt5gp
    tile_layer_url: /local/map/{z}/{x}/{y}.png
    zoom: 20
    entities:
      - entity: device_tracker.labby_luba_vp8gt5gp
        picture:  /local/pictures/luba2.png
        size: 20
        display: marker
        history_start: 96 hours ago
        history_line_color: yellow
        history_show_dots: false
    card_size: 5
    tile_layers:
      - url: https://mt0.google.com/vt/lyrs=s&x={x}&y={y}&z={z}
    default_zoom: 18
    tile_layer_options:
      maxZoom: 18
      maxNativeZoom: 20
      minZoom: 14
    theme_mode: light
  - type: grid
    columns: 2

    square: false
    cards:
      - type: custom:mushroom-template-card #history rain
        primary: |-
          {% set rain = states('sensor.owmh_home_day0rain') | float %}
          {% if rain == 0 %}
          No rain in last 24h
          {% else %}
          {{ rain }} mm rain in last 24h
          {% endif %}
        secondary: |-
          {% set rain = states('sensor.owmh_home_day0rain') | float %}
          {% if rain < 3 %}
          dry
          {% else %}
          wet
          {% endif %}
        icon: |-
          {% if states('sensor.owmh_home_day0rain') | float < 3 %}
          mdi:weather-sunny
          {% else %}
          mdi:weather-rainy
          {% endif %}
        entity: sensor.owmh_home_day0rain
        icon_color: |-
          {% if states('sensor.owmh_home_day0rain') | float < 3 %}
          yellow
          {% else %}
          blue
          {% endif %}
        tap_action:
          action: more-info
      - type: custom:mushroom-template-card # rain predicted
        primary: |-
          {% if states('sensor.sevenoaks_probability_of_precipitation') | float < 50 %}
          Prob of rain low
          {% else %}
          Prob of rain high
          {% endif %}
        secondary: >-
          {% set prob = states('sensor.sevenoaks_probability_of_precipitation') | float %}
          Current prob: {{ prob }}%
        icon: |-
          {% if states('sensor.sevenoaks_probability_of_precipitation') | float < 50 %}
          mdi:weather-sunny
          {% else %}
          mdi:weather-pouring
          {% endif %}
        entity: sensor.sevenoaks_probability_of_precipitation
        icon_color: |-
          {% if states('sensor.sevenoaks_probability_of_precipitation') | float < 50 %}
          yellow
          {% else %}
          blue
          {% endif %}
        tap_action:
          action: more-info



      - type: custom:mushroom-entity-card #sat l1 
        entity: sensor.labby_l1_satellites_co_viewing
        name: L1 Co-Viewing
      - type: custom:mushroom-entity-card #sat l2
        entity: sensor.labby_l2_satellites_co_viewing
        name: L2 Co-Viewing

      - type: custom:mushroom-entity-card #progress
        entity: sensor.labby_progress
        name: Mowing Progress
        unit: '%'

      - type: custom:mushroom-entity-card #mowing time
        entity: sensor.labby_elapsed_time
        name: Mowing Time
        unit: minutes

      - type: custom:mushroom-entity-card #blade height
        entity: sensor.labby_blade_height
        name: Blade Height
        unit: 'mm'

      # - type: custom:mushroom-template-card #maintenance
      #   entity: sensor.hours_since_last_blade_maintenance

      #   primary: "Tap {{ states('input_select.blade_maintenance_stage') }} Done"
      #   secondary: "{{ states('sensor.hours_since_last_blade_maintenance') }} hours from last"
      #   icon: mdi:check-decagram
      #   icon_color: |-
      #     {% set hours = states('sensor.hours_since_last_blade_maintenance') | float(0) %}
      #     {% if hours > 50 %}
      #     red
      #     {% else %}
      #     green
      #     {% endif %}
      #   tap_action:
      #     action: call-service
      #     confirmation:
      #       text: Are you sure you want to confirm this maintenance step?
      #     service: script.blade_maintenance_done

      - type: custom:mushroom-template-card
        entity: sensor.hours_since_last_blade_maintenance
        primary: "Maintenance"
        secondary: "{{ states('sensor.hours_since_last_blade_maintenance') }} hrs last"
        icon: mdi:check-decagram
        icon_color: |-
          {% set hours = states('sensor.hours_since_last_blade_maintenance') | float(0) %}
          {% if hours > 50 %}
          red
          {% else %}
          green
          {% endif %}
        tap_action:
          action: fire-dom-event
          browser_mod:
            service: browser_mod.popup
            data:
              title: Blade Maintenance
              content:
                type: grid
                columns: 1
                square: false
                cards:

                - type: custom:mushroom-template-card
                  primary: Swap Discs
                  secondary: "{{ states('sensor.hours_since_last_blade_maintenance') }} hours since last maintenance"
                  icon: mdi:sync
                  icon_color: |-
                    {% if is_state('input_select.blade_maintenance_stage', 'Swap discs') %}
                    orange
                    {% else %}
                    grey
                    {% endif %}
                  tap_action:
                    action: call-service
                    confirmation:
                      text: Are you sure you want to confirm this maintenance step?
                    service: script.blade_maintenance_done

                - type: custom:mushroom-template-card
                  primary: Rotate Blades
                  secondary: "{{ states('sensor.hours_since_last_blade_maintenance') }} hours since last maintenance"
                  icon: mdi:rotate-right
                  icon_color: |-
                    {% if is_state('input_select.blade_maintenance_stage', 'Rotate blades') %}
                    orange
                    {% else %}
                    grey
                    {% endif %}
                  tap_action:
                    action: call-service
                    confirmation:
                      text: Are you sure you want to confirm this maintenance step?
                    service: script.blade_maintenance_done

                - type: custom:mushroom-template-card
                  primary: Swap Discs Again
                  secondary: "{{ states('sensor.hours_since_last_blade_maintenance') }} hours since last maintenance"
                  icon: mdi:sync-alert
                  icon_color: |-
                    {% if is_state('input_select.blade_maintenance_stage', 'Swap discs again') %}
                    orange
                    {% else %}
                    grey
                    {% endif %}
                  tap_action:
                    action: call-service
                    confirmation:
                      text: Are you sure you want to confirm this maintenance step?
                    service: script.blade_maintenance_done

                - type: custom:mushroom-template-card
                  primary: New Blades
                  secondary: "{{ states('sensor.hours_since_last_blade_maintenance') }} hours since last maintenance"
                  icon: mdi:knife-military
                  icon_color: |-
                    {% if is_state('input_select.blade_maintenance_stage', 'New blades') %}
                    orange
                    {% else %}
                    grey
                    {% endif %}
                  tap_action:
                    action: call-service
                    confirmation:
                      text: Are you sure you want to confirm this maintenance step?
                    service: script.blade_maintenance_done
      - type: custom:mushroom-template-card                 # Back Lawn
        primary: Back Lawn
        entity: sensor.time_since_last_mow_back_lawn_1
        secondary: "{{ states('sensor.time_since_last_mow_back_lawn_1') }} since last"
        icon: mdi:texture-box
        icon_color: |-
          {% if is_state('input_select.back_lawn_schedule', 'never') %}
          red
          {% else %}
          green
          {% endif %}
        tap_action:
          action: fire-dom-event
          browser_mod:
            service: browser_mod.popup
            data:
              title: Back Lawn Control
              content:
                type: grid
                columns: 1
                square: false
                cards:



                  - type: custom:mushroom-template-card
                    entity: script.mow_back_lawn
                    primary: Mow back lawn Now
                    icon: mdi:texture-box
                    icon_color: green
                    tap_action:
                      action: call-service
                      service: script.mow_back_lawn
                    hold_action:
                      action: more-info

                  - type: custom:mushroom-select-card
                    entity: input_select.back_lawn_schedule
                    name: Back Lawn Schedule
                    icon_color: green

                  - type: custom:mushroom-entity-card
                    entity: input_datetime.back_lawn_next_time
                    icon_color: green
                    name: Back Lawn Schedule Time - click to change

                  - type: custom:mushroom-template-card
                    entity: input_datetime.back_lawn_last_mow_1
                    icon: mdi:mower
                    primary: "{{ states('sensor.time_since_last_mow_back_lawn_1') }} last mow"
                    secondary: "{{ states('input_datetime.back_lawn_last_mow_1') }}"
                    icon_color: |-
                      {% set days = states('sensor.time_since_last_mow_back_lawn_1').split()[0] | float(0) %}
                      {% if days > 7 %}
                      red
                      {% else %}
                      green
                      {% endif %}

                  - type: custom:mushroom-template-card
                entity: input_datetime.back_lawn_last_mow_2
                icon: mdi:mower
                primary: "{{ states('sensor.time_since_last_mow_back_lawn_2') }} prev mow"
                secondary: "{{ states('input_datetime.back_lawn_last_mow_2') }}"
                icon_color: |-
                  {% set days = states('sensor.time_since_last_mow_back_lawn_2').split()[0] | float(0) %}
                  {% if days > 14 %}
                  red
                  {% else %}
                  green
                  {% endif %}






      
      - type: custom:mushroom-template-card #bottom grass
        primary: Bottom Grass Control
        secondary: "{{ states('sensor.time_since_last_mow_bottom_grass_1') }} since last"
        entity: sensor.time_since_last_mow_bottom_grass_1
        icon: mdi:grass
        icon_color: |-
          {% if is_state('input_select.bottom_grass_schedule', 'never') %}
          red
          {% else %}
          green
          {% endif %}
        tap_action:
          action: fire-dom-event
          browser_mod:
            service: browser_mod.popup
            data:
              title: Bottom Grass Control
              content:
                type: grid
                columns: 1
                square: false
                cards:
                  - type: custom:mushroom-template-card
                    entity: script.mow_bottom_grass
                    primary: Mow bottom grass Now
                    icon: mdi:grass
                    icon_color: green
                    tap_action:
                      action: call-service
                      service: script.mow_bottom_grass
                    hold_action:
                      action: more-info

                  - type: custom:mushroom-select-card
                    entity: input_select.bottom_grass_schedule
                    name: Bottom Grass Schedule
                    icon_color: |-
                      {% if is_state('input_select.bottom_grass_schedule', 'never') %}
                      red
                      {% else %}
                      green
                      {% endif %}

                  - type: custom:mushroom-entity-card
                    entity: input_datetime.bottom_grass_next_time
                    name: Bottom Grass Schedule Time
                    icon_color: green

                  - type: custom:mushroom-template-card
                    entity: input_datetime.bottom_grass_last_mow_1
                    icon: mdi:mower
                    primary: "{{ states('sensor.time_since_last_mow_bottom_grass_1') }} since last"
                    secondary: "{{ states('input_datetime.bottom_grass_last_mow_1') }}"
                    icon_color: |-
                      {% set days = states('sensor.time_since_last_mow_bottom_grass_1').split()[0] | float(0) %}
                      {% if days > 7 %}
                      red
                      {% else %}
                      green
                      {% endif %}

                  - type: custom:mushroom-template-card
                    entity: input_datetime.bottom_grass_last_mow_2
                    icon: mdi:mower
                    primary: "{{ states('sensor.time_since_last_mow_bottom_grass_2') }} since previous "
                    secondary: "{{ states('input_datetime.bottom_grass_last_mow_2') }}"
                    icon_color: |-
                      {% set days = states('sensor.time_since_last_mow_bottom_grass_2').split()[0] | float(0) %}
                      {% if days > 14 %}
                      red
                      {% else %}
                      green
                      {% endif %}
              dismissable: true
              right_button: Close
              right_button_action:
                service: browser_mod.close_popup

      - type: custom:mushroom-template-card #golf lawn\
        entity: sensor.time_since_last_mow_golf_lawn_1
        primary: Golf Lawn Control
        secondary: "{{ states('sensor.time_since_last_mow_golf_lawn_1') }} since last"

        icon: mdi:golf
        icon_color: |-
          {% if is_state('input_select.golf_lawn_schedule', 'never') %}
          red
          {% else %}
          green
          {% endif %}
        tap_action:
          action: fire-dom-event
          browser_mod:
            service: browser_mod.popup
            data:
              title: Golf Lawn Control
              content:
                type: grid
                columns: 1
                square: false
                cards:
                  - type: custom:mushroom-template-card
                    entity: script.mow_golf_lawn
                    primary: Mow golf lawn Now
                    icon: mdi:golf
                    icon_color: green
                    tap_action:
                      action: call-service
                      service: script.mow_golf_lawn
                    hold_action:
                      action: more-info

                  - type: custom:mushroom-select-card
                    entity: input_select.golf_lawn_schedule
                    name: Golf Lawn Schedule
                    icon_color: |-
                      {% if is_state('input_select.golf_lawn_schedule', 'never') %}
                      red
                      {% else %}
                      green
                      {% endif %}

                  - type: custom:mushroom-entity-card
                    entity: input_datetime.golf_lawn_next_time
                    name: Golf Lawn Schedule Time
                    icon_color: green

                  - type: custom:mushroom-template-card
                    entity: input_datetime.golf_lawn_last_mow_1
                    icon: mdi:mower
                    primary: "{{ states('sensor.time_since_last_mow_golf_lawn_1') }} since last"
                    secondary: "{{ states('input_datetime.golf_lawn_last_mow_1') }}"
                    icon_color: |-
                      {% set days = states('sensor.time_since_last_mow_golf_lawn_1').split()[0] | float(0) %}
                      {% if days > 7 %}
                      red
                      {% else %}
                      green
                      {% endif %}

                  - type: custom:mushroom-template-card
                    entity: input_datetime.golf_lawn_last_mow_2
                    icon: mdi:mower
                    primary: "{{ states('sensor.time_since_last_mow_golf_lawn_2') }} since last"
                    secondary: "{{ states('input_datetime.golf_lawn_last_mow_2') }}"
                    icon_color: |-
                      {% set days = states('sensor.time_since_last_mow_golf_lawn_2').split()[0] | float(0) %}
                      {% if days > 14 %}
                      red
                      {% else %}
                      green
                      {% endif %}
              dismissable: true
              right_button: Close
              right_button_action:
                service: browser_mod.close_popup

      - type: custom:mushroom-template-card #top lawn
        primary: Top Lawn Control
        entity: sensor.time_since_last_mow_top_lawn_1
        secondary: "{{ states('sensor.time_since_last_mow_top_lawn_1') }} since last"

        icon: mdi:weather-sunny
        icon_color: |-
          {% if is_state('input_select.top_lawn_schedule', 'never') %}
          red
          {% else %}
          green
          {% endif %}
        tap_action:
          action: fire-dom-event
          browser_mod:
            service: browser_mod.popup
            data:
              title: Top Lawn Control
              content:
                type: grid
                columns: 1
                square: false
                cards:
                  - type: custom:mushroom-template-card
                    entity: script.mow_top_lawn
                    primary: Mow top lawn Now
                    icon: mdi:weather-sunny
                    icon_color: green
                    tap_action:
                      action: call-service
                      service: script.mow_top_lawn
                    hold_action:
                      action: more-info

                  - type: custom:mushroom-select-card
                    entity: input_select.top_lawn_schedule
                    name: Top Lawn Schedule
                    icon_color: |-
                      {% if is_state('input_select.top_lawn_schedule', 'never') %}
                      red
                      {% else %}
                      green
                      {% endif %}

                  - type: custom:mushroom-entity-card
                    entity: input_datetime.top_lawn_next_time
                    name: Top Lawn Schedule Time
                    icon_color: green

                  - type: custom:mushroom-template-card
                    entity: input_datetime.top_lawn_last_mow_1
                    icon: mdi:mower
                    primary: "{{ states('sensor.time_since_last_mow_top_lawn_1') }} days since last mow"
                    secondary: "{{ states('input_datetime.top_lawn_last_mow_1') }}"
                    icon_color: |-
                      {% set days = states('sensor.time_since_last_mow_top_lawn_1').split()[0] | float(0) %}
                      {% if days > 7 %}
                      red
                      {% else %}
                      green
                      {% endif %}

                  - type: custom:mushroom-template-card
                    entity: input_datetime.top_lawn_last_mow_2
                    icon: mdi:mower
                    primary: "{{ states('sensor.time_since_last_mow_top_lawn_2') }} days since previous mow"
                    secondary: "{{ states('input_datetime.top_lawn_last_mow_2') }}"
                    icon_color: |-
                      {% set days = states('sensor.time_since_last_mow_top_lawn_2').split()[0] | float(0) %}
                      {% if days > 14 %}
                      red
                      {% else %}
                      green
                      {% endif %}
              dismissable: true
              right_button: Close
              right_button_action:
                service: browser_mod.close_popup  
      # - type: custom:mushroom-template-card
      #   primary: Path to Top Control
      #   icon: mdi:road
      #   icon_color: |-
      #     {% if is_state('input_select.path_to_top_schedule', 'never') %}
      #     red
      #     {% else %}
      #     green
      #     {% endif %}
      #   tap_action:
      #     action: fire-dom-event
      #     browser_mod:
      #       service: browser_mod.popup
      #       data:
      #         title: Path to Top Control
      #         content:
      #           type: grid
      #           columns: 1
      #           square: false
      #           cards:
      #             - type: custom:mushroom-template-card
      #               entity: script.mow_path_to_top
      #               primary: Mow path to top Now
      #               icon: mdi:road
      #               icon_color: green
      #               tap_action:
      #                 action: call-service
      #                 service: script.mow_path_to_top
      #               hold_action:
      #                 action: more-info

      #             - type: custom:mushroom-select-card
      #               entity: input_select.path_to_top_schedule
      #               name: Path to Top Schedule
      #               icon_color: |-
      #                 {% if is_state('input_select.path_to_top_schedule', 'never') %}
      #                 red
      #                 {% else %}
      #                 green
      #                 {% endif %}

      #             - type: custom:mushroom-entity-card
      #               entity: input_datetime.path_to_top_next_time
      #               name: Path to Top Schedule Time
      #               icon_color: green

      #             - type: custom:mushroom-template-card
      #               entity: input_datetime.path_to_top_last_mow_1
      #               icon: mdi:mower
      #               primary: "{{ states('sensor.time_since_last_mow_path_to_top_1') }} days since last mow"
      #               secondary: "{{ states('input_datetime.path_to_top_last_mow_1') }}"
      #               icon_color: |-
      #                 {% set days = states('sensor.time_since_last_mow_path_to_top_1').split()[0] | float(0) %}
      #                 {% if days > 7 %}
      #                 red
      #                 {% else %}
      #                 green
      #                 {% endif %}

      #             - type: custom:mushroom-template-card
      #               entity: input_datetime.path_to_top_last_mow_2
      #               icon: mdi:mower
      #               primary: "{{ states('sensor.time_since_last_mow_path_to_top_2') }} days since previous mow"
      #               secondary: "{{ states('input_datetime.path_to_top_last_mow_2') }}"
      #               icon_color: |-
      #                 {% set days = states('sensor.time_since_last_mow_path_to_top_2').split()[0] | float(0) %}
      #                 {% if days > 14 %}
      #                 red
      #                 {% else %}
      #                 green
      #                 {% endif %}
      #         dismissable: true
      #         right_button: Close
      #         right_button_action:
      #           service: browser_mod.
                
      # - type: vertical-stack
      #   cards:
      #     - type: custom:mushroom-title-card
 

      #     - type: custom:mushroom-template-card
      #       primary: >
      #         Next Maintenance Step: 
      #         {{ states('input_select.blade_maintenance_stage') }}
      #       secondary: >
      #         Hours since last maintenance: 
      #         {{ states('sensor.hours_since_last_blade_maintenance') }} h
      #       icon: mdi:knife-military
      #       icon_color: teal
      #       layout: vertical

      #     - type: custom:mushroom-entity-card
      #       entity: sensor.hours_since_last_blade_maintenance
      #       name: Hours Since Last Reset
      #       icon: mdi:timer-outline
      #       layout: vertical

      #     - type: custom:mushroom-template-card
      #       primary: Confirm Blade Maintenance Done
      #       secondary: Press to record step and reset hours
      #       icon: mdi:check-decagram
      #       icon_color: green
      #       tap_action:
      #         action: call-service
      #         service: script.blade_maintenance_done
      #       layout: vertical
